extends layout

block vars
  - var title = 'Actions';

{% load static from staticfiles %}
{% load widget_tweaks %}

block navbar-center
  div.uk-navbar-content.uk-navbar-center
    if current_flight
      {{ request.user.get_full_name }} - {{ request.user.employee.district }} - {{ current_flight }}
    else
      {{ request.user.get_full_name }} - {{ request.user.employee.district }}

block content
  div.uk-container.uk-container-center
    div.uk-grid(data-uk-grid-margin)
      div.uk-width-medium-1-4
        ul.uk-nav.uk-nav-side(data-uk-switcher="{connect:'#tab-1', animation: 'slide-vertical'}")
          li.uk-active: a(href="#") Check-In
          li: a(href="#") Passengers
          li: a(href="#") Search
      div.uk-width-medium-3-4
          ul#tab-1.uk-switcher
            li.uk-active
              div.uk-block.uk-block-muted
                div.uk-container
                  h3 Check-In
                  if checkin_form
                    form.uk-panel.uk-panel-box.uk-form(action="{% url 'bt_actions' %}", method="post")
                      {% csrf_token %}
                      {% with WIDGET_ERROR_CLASS='uk-form-danger' WIDGET_REQUIRED_CLASS='required' %}
                      div.uk-grid(data-uk-grid-margin)
                        div.uk-width-medium-1-2
                          div.uk-panel
                            div.uk-form-row
                              {{ checkin_form.pnr.errors|safe }}
                              {% render_field checkin_form.pnr class="uk-width-1-1 uk-form-medium" placeholder=checkin_form.pnr.label %}
                            div.uk-form-row
                              {{ checkin_form.name.errors|safe }}
                              {% render_field checkin_form.name class="uk-width-1-1 uk-form-medium" placeholder=checkin_form.name.label %}
                        div.uk-width-medium-1-2
                            div.uk-form-row
                              {{ checkin_form.material_number.errors|safe }}
                              {% render_field checkin_form.material_number class="uk-width-1-1 uk-form-medium" placeholder=checkin_form.material_number.label %}
                      div.uk-grid(data-uk-grid-margin)
                        div.uk-width-medium-1-4.uk-container-center
                          div.uk-form-row
                            {{ checkin_form.form_type.as_hidden }}
                            button.uk-width-1-1.uk-button.uk-button-primary.uk-button-medium(type="submit") Save
                      {% endwith %}
                  else
                    p You must set your current flight before starting adding passengers.
                    button.uk-button(data-uk-modal="{target:'#set_current_flight'}") Set Current Flight
            li
              div.uk-block.uk-block-muted
                div.uk-container
                  h3 Passengers
                  p Hello from passengers
            li
              div.uk-block.uk-block-muted
                div.uk-container
                  h3 Search
                  form.uk-panel.uk-panel-box.uk-form(action="{% url 'bt_actions' %}", method="post")
                    {% csrf_token %}
                    {% with WIDGET_ERROR_CLASS='uk-form-danger' WIDGET_REQUIRED_CLASS='required' %}
                    div.uk-grid(data-uk-grid-margin)
                      div.uk-width-medium-1-2
                        div.uk-panel
                          div.uk-form-row
                            {{ search_form.pnr.errors|safe }}
                            {% render_field search_form.pnr class="uk-width-1-1 uk-form-medium" placeholder=search_form.pnr.label %}
                          div.uk-form-row
                            {{ search_form.material_number.errors|safe }}
                            {% render_field search_form.material_number class="uk-width-1-1 uk-form-medium" placeholder=search_form.material_number.label %}
                    div.uk-grid(data-uk-grid-margin)
                      div.uk-width-medium-1-4.uk-container-center
                        div.uk-form-row
                          {{ search_form.form_type.as_hidden }}
                          button.uk-width-1-1.uk-button.uk-button-primary.uk-button-medium(type="submit") Search
                    {% endwith %}
  div#modals
    div#set_current_flight.uk-modal
      div.uk-modal-dialog
        a.uk-modal-close.uk-close
        div.uk-container
          h3 Set Current Flight
          form.uk-panel.uk-panel-box.uk-form(action="{% url 'bt_actions' %}", method="post")
            {% csrf_token %}
            {% with WIDGET_ERROR_CLASS='uk-form-danger' WIDGET_REQUIRED_CLASS='required' %}
            div.uk-grid(data-uk-grid-margin)
              div.uk-width-medium-1-2.uk-container-center
                div.uk-form-row
                  {{ set_current_flight_form.current_flight.errors|safe }}
                  {% render_field set_current_flight_form.current_flight class="uk-width-1-1 uk-form-medium" placeholder=set_current_flight_form.current_flight.label %}
            div.uk-grid(data-uk-grid-margin)
              div.uk-width-medium-1-2.uk-container-center
                div.uk-form-row
                  {{ set_current_flight_form.form_type.as_hidden }}
                  button.uk-width-1-1.uk-button.uk-button-primary.uk-button-medium(type="submit") Set
            {% endwith %}
    div#flush_current_flight.uk-modal
      div.uk-modal-dialog
        a.uk-modal-close.uk-close
        div.uk-container
          h3 Flush Current Flight
          form.uk-form(action="{% url 'bt_actions' %}", method="post")
            {% csrf_token %}
            {% with WIDGET_ERROR_CLASS='uk-form-danger' WIDGET_REQUIRED_CLASS='required' %}
            div.uk-grid(data-uk-grid-margin)
              div.uk-width-medium-1-2.uk-container-center
                div.uk-form-row
                  {{ flush_current_flight_form.form_type.as_hidden }}
                  button.uk-width-1-1.uk-button.uk-button-primary.uk-button-medium(type="submit") Flush
            {% endwith %}

